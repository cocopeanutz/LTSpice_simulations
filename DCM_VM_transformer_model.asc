Version 4
SHEET 1 1344 680
WIRE 240 -16 192 -16
WIRE 192 64 192 -16
WIRE 160 144 80 144
WIRE 288 144 224 144
WIRE 400 144 368 144
WIRE 560 144 528 144
WIRE 864 144 752 144
WIRE 992 144 864 144
WIRE 1152 144 992 144
WIRE 1264 144 1152 144
WIRE 560 176 560 144
WIRE 160 224 128 224
WIRE 256 224 224 224
WIRE 992 240 992 208
WIRE 1152 240 1152 208
WIRE 128 288 128 224
WIRE 192 288 128 288
WIRE 256 288 256 224
WIRE 256 288 192 288
WIRE 752 320 752 224
WIRE 864 320 864 224
WIRE 864 320 752 320
WIRE 992 320 864 320
WIRE 1152 320 992 320
WIRE 864 368 864 320
WIRE 192 384 192 288
WIRE 192 384 160 384
FLAG 240 64 0
FLAG 528 144 d1
FLAG 560 256 0
FLAG 864 368 0
FLAG 1264 144 d2
FLAG 400 144 c
FLAG 80 144 a
FLAG 160 384 p
SYMBOL ideal_transformer 144 128 R0
WINDOW 3 -190 -33 Left 2
SYMATTR InstName X1
SYMBOL bv 992 224 R0
WINDOW 3 -60 126 Left 2
SYMATTR Value V=1-V(d1)
SYMATTR InstName B1
SYMBOL bv 240 -32 R0
SYMATTR InstName B2
SYMATTR Value V=V(d1)/(V(d1)+V(d2))
SYMBOL res 544 160 R0
SYMATTR InstName R1
SYMATTR Value 1000T
SYMBOL diode 976 144 R0
WINDOW 0 9 -21 Left 2
SYMATTR InstName Diode1
SYMATTR Value IdealDiode
SYMBOL bi2 752 144 R0
WINDOW 0 -72 9 Left 2
WINDOW 3 -49 -50 Left 2
SYMATTR InstName B3
SYMATTR Value I=2*L*fsw*I(V1)/(V(d1)*(V(a)-V(c)))-V(d1)
SYMBOL res 848 128 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL diode 1168 208 R180
WINDOW 0 -78 84 Left 2
WINDOW 3 -130 4 Left 2
SYMATTR InstName Diode2
SYMATTR Value IdealDiode
SYMBOL bv 1152 224 R0
WINDOW 3 -60 126 Left 2
SYMATTR Value V=0.03
SYMATTR InstName B4
SYMBOL voltage 272 144 R270
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0
TEXT 280 472 Left 2 !;.model IdealDiode D(Is=1 n=0.1)\n.model IdealDiode D(Ron=1f Roff=100G Vfwd=0)
TEXT 280 528 Left 2 !.param L=1 fsw=10k
